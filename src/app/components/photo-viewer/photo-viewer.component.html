<div class="viewer-container">
  @if (currentImage().id && auth.isLoggedIn()) {
  <div class="actions-top-left">
    <button
      mat-icon-button
      class="action-btn delete-btn"
      (click)="deleteImage()"
      matTooltip="LÃ¶schen"
    >
      <mat-icon>delete</mat-icon>
    </button>

    <button
      mat-icon-button
      class="action-btn edit-btn"
      (click)="editPhoto()"
      matTooltip="Bearbeiten"
    >
      <mat-icon>edit</mat-icon>
    </button>
  </div>
  }

  <button mat-icon-button class="close-btn" (click)="close()">
    <mat-icon>close</mat-icon>
  </button>

  <div class="image-wrapper">
    <img
      class="main-image"
      [src]="currentImage().url"
      [srcset]="currentImage().url | webpUrl : 'srcset'"
      sizes="(max-width: 600px) 100vw, (max-width: 1200px) 80vw, 1280px"
      [alt]="currentImage().name"
    />

    @if (currentIndex() > 0) {
    <button mat-icon-button class="nav-btn prev" (click)="prev()">
      <mat-icon>chevron_left</mat-icon>
    </button>
    } @if (currentIndex() < data.images.length - 1) {
    <button mat-icon-button class="nav-btn next" (click)="next()">
      <mat-icon>chevron_right</mat-icon>
    </button>
    }
  </div>

  <div class="viewer-footer">
    <div class="footer-info">
      <h3 class="image-title">
        {{ currentImage().title || currentImage().name }}
      </h3>

      @if (currentImage().description) {
      <p class="image-desc">{{ currentImage().description }}</p>
      }

      <div class="meta-row">
        @if (currentImage().date) {
        <span>{{ currentImage().date | date : 'medium' : undefined : currentLocale() }}</span> } @if
        (currentImage().camera) { <span>{{ currentImage().camera }}</span> } @if
        (currentImage().city) { <span>{{ currentImage().city }}</span> }
      </div>

      <div class="exif-row">
        @if (currentImage().copyright) {
        <span class="exif-tag copyright"> &copy; {{ currentImage().copyright }} </span>
        } @for (keyword of currentImage().keywords; track keyword) {
        <span class="keyword-pill">{{ keyword }}</span>
        }
      </div>
    </div>

    <span class="image-counter">...</span>
  </div>
</div>
